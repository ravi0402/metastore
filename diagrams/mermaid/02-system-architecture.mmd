graph TB
    subgraph "Client Layer"
        REST[REST API Clients]
        GraphQL[GraphQL Clients]
        gRPC[gRPC Clients]
        WS[WebSocket Clients]
        SDK[SDKs]
    end
    
    subgraph "API Gateway Layer"
        Kong[Kong Gateway<br/>Routing, Auth, Rate Limiting]
    end
    
    subgraph "Microservices Layer"
        subgraph "Core Services"
            MetadataService[Metadata Service<br/>CRUD, Versioning<br/>]
            SearchService[Search Service<br/>Full-text, Faceted<br/>]
            AuditService[Audit Service<br/>Compliance, Tracking<br/>]
        end
        
        subgraph "Support Services"
            IngestionService[Ingestion Service<br/>Batch, Stream<br/>]
            NotificationService[Notification Service<br/>Events, Webhooks<br/>]
            TaskService[Task Service<br/>Async Jobs<br/>]
        end
    end
    
    subgraph "Messaging Layer"
        Kafka[Apache Kafka<br/>All Events & Messaging]
    end
    
    subgraph "Data Layer"
        Postgres[(PostgreSQL<br/>Primary Store)]
        Aerospike[(Aerospike<br/>Distributed Cache)]
        Elasticsearch[(Elasticsearch<br/>Search Index)]
        Redis[(Redis<br/>Task Queue)]
    end
    
    subgraph "Observability"
        Monitoring[Prometheus + Grafana]
        Logging[ELK/Loki]
        Tracing[Jaeger]
    end
    
    REST --> Kong
    GraphQL --> Kong
    gRPC --> Kong
    WS --> Kong
    SDK --> Kong
    
    Kong --> MetadataService
    Kong --> SearchService
    Kong --> AuditService
    Kong --> IngestionService
    Kong --> NotificationService
    
    MetadataService --> Postgres
    MetadataService --> Aerospike
    MetadataService --> Kafka
    
    SearchService --> Elasticsearch
    SearchService --> Kafka
    
    AuditService --> Postgres
    AuditService --> Kafka
    
    IngestionService --> Kafka
    IngestionService --> Postgres
    
    NotificationService --> Kafka
    NotificationService --> WS
    
    TaskService --> Redis
    TaskService --> Kafka
    TaskService --> Postgres
    
    Kafka -.Cache Invalidation.-> Aerospike
    Kafka -.Search Sync.-> Elasticsearch
    
    MetadataService -.Metrics.-> Monitoring
    SearchService -.Metrics.-> Monitoring
    IngestionService -.Metrics.-> Monitoring
    
    MetadataService -.Logs.-> Logging
    SearchService -.Logs.-> Logging
    
    MetadataService -.Traces.-> Tracing
    SearchService -.Traces.-> Tracing
    IngestionService -.Traces.-> Tracing
    
    style Postgres fill:#336791,color:#fff
    style Aerospike fill:#C41E3A,color:#fff
    style Elasticsearch fill:#005571,color:#fff
    style Kong fill:#003459,color:#fff
    style Kafka fill:#231F20,color:#fff
    style MetadataService fill:#4CAF50,color:#fff
    style SearchService fill:#2196F3,color:#fff
    style AuditService fill:#FF9800,color:#fff
    style IngestionService fill:#9C27B0,color:#fff
    style NotificationService fill:#00BCD4,color:#fff
    style TaskService fill:#795548,color:#fff
